<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gargesh Patil | Portfolio</title>
    <!-- Using Tailwind CSS for layout and styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- Using 'Lora' as a professional serif font and 'Inter' for UI elements -->
    <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;600&family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            background-color: #000000;
            color: #ffffff;
            /* Prevents scrollbars from appearing during animations */
            overflow: hidden; 
        }

        /* Base styles for animated scene elements */
        .scene {
            opacity: 0; /* Start hidden */
            position: absolute;
            width: calc(100% - 4rem); /* Adjust width for padding */
            max-width: 64rem; /* Increased max-width for desktop (max-w-5xl) */
        }

        /* Animation definitions */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes fadeOutUp {
            from {
                opacity: 1;
                transform: translateY(0);
            }
            to {
                opacity: 0;
                transform: translateY(-30px);
            }
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeOutDown {
            from {
                opacity: 1;
                transform: translateY(0);
            }
            to {
                opacity: 0;
                transform: translateY(30px);
            }
        }

        /* Animation utility classes */
        .animate-fadeInUp {
            animation: fadeInUp 0.8s ease-out forwards;
        }
        .animate-fadeOutUp {
            animation: fadeOutUp 0.8s ease-in forwards;
        }
        .animate-fadeInDown {
            animation: fadeInDown 0.8s ease-out forwards;
        }
        .animate-fadeOutDown {
            animation: fadeOutDown 0.8s ease-in forwards;
        }

        /* Style for the link within the h1 tag */
        .name-link {
            text-decoration: none;
            color: inherit;
            transition: color 0.3s ease;
        }
        .name-link:hover {
            color: #a0aec0; /* A light gray for hover effect */
        }

        /* Gemini feature button styling */
        .gemini-btn {
            background: linear-gradient(90deg, #4f46e5, #c026d3);
        }
        
        .gemini-btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        .spinner {
            display: inline-block;
            width: 1rem;
            height: 1rem;
            border: 2px solid rgba(255,255,255,0.5);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }

    </style>
</head>
<body class="font-sans antialiased">

    <!-- 
      Main container for the interactive sequence.
      `h-screen` makes it take up the full viewport height.
    -->
    <div id="sequence-container" class="relative w-full h-screen flex items-center justify-center md:justify-start p-8 md:p-16">
        
        <!-- Scene 1: "Hi There!" Text -->
        <div id="intro-scene" class="scene">
            <h1 class="font-serif text-5xl md:text-6xl lg:text-8xl font-normal text-center md:text-left">Hi There!</h1>
        </div>
        
        <!-- Scene 2: Name & Socials -->
        <div id="name-scene" class="scene hidden">
            <h1 class="font-serif text-5xl md:text-6xl lg:text-8xl font-normal text-center md:text-left">
                I'm <a href="https://www.linkedin.com/in/gargesh-patil-8a25a6160" target="_blank" rel="noopener noreferrer" class="name-link">Gargesh Patil.</a>
            </h1>
        </div>

        <!-- Scene 3: Role -->
        <div id="third-year-scene" class="scene hidden">
            <p class="font-serif text-xl md:text-2xl lg:text-3xl font-normal leading-relaxed text-center md:text-left">
                I am a Third-year B.Com. (Hons.) student at <em>Shri Ram College of Commerce</em> and pursuing CA (Intermediate), with experience leading initiatives at the intersection of strategy, finance, and entrepreneurship.
            </p>
        </div>
        
        <!-- Scene 4: Experience Lead -->
        <div id="incubation-scene" class="scene hidden">
            <p class="font-serif text-xl md:text-2xl lg:text-3xl font-normal leading-relaxed text-center md:text-left">
                As Chief Secretary of the <em><a href="https://www.linkedin.com/company/shri-ram-incubation-center-srcc/" target="_blank" rel="noopener noreferrer" class="name-link">Shri Ram Incubation Center</a></em>— SRCC’s platform for nurturing student-led ventures — I revived and scaled a dormant initiative into a 14-venture ecosystem engaging 800+ investors. 
            </p>
        </div>
        
        <!-- Scene 5: Impact Summary -->
        <div id="impact-scene" class="scene hidden">
            <p class="font-serif text-xl md:text-2xl lg:text-3xl font-normal leading-relaxed text-center md:text-left">
                In doing so, I applied strategic insight to design a sustainable incubation model, and gained first-hand experience in building systems, mobilizing stakeholders, and driving impact at scale.
            </p>
        </div>

        <!-- Scene 6: Beyond Academics -->
        <div id="beyond-academics-scene" class="scene hidden">
            <p class="font-serif text-xl md:text-2xl lg:text-3xl font-normal leading-relaxed text-center md:text-left">
                Beyond academics, I performed as a street play artist, experiences that strengthened my ability to <em>connect</em> with people, express ideas with <em>clarity</em>, and understand <em>diverse perspectives</em>.
            </p>
        </div>

        <!-- Scene 7: Commitment -->
        <div id="commitment-scene" class="scene hidden">
            <p class="font-serif text-xl md:text-2xl lg:text-3xl font-normal leading-relaxed text-center md:text-left">
                From shaping incubation strategy to performing in public spaces, my pursuits reflect a commitment to strategic <em>problem-solving, influence, and meaningful impact.</em>
            </p>
        </div>
        
        <!-- Scene 8: Seeking & Button -->
        <div id="seeking-scene" class="scene hidden">
            <p class="font-serif text-xl md:text-2xl lg:text-3xl font-normal leading-relaxed text-center md:text-left">
                I am seeking opportunities in consulting, investment banking, and strategic finance where I can apply this <em>blend of structured thinking and persuasive storytelling.</em>
            </p>
            <div class="mt-8 flex flex-col items-center md:items-start gap-y-8">
                <button id="get-in-touch-btn" class="border-2 border-white text-white font-medium py-3 px-8 text-lg hover:bg-white hover:text-black transition-all duration-300 flex-shrink-0">
                    Get in touch
                </button>
                <div class="flex items-center justify-center md:justify-start space-x-6">
                     <a href="https://www.linkedin.com/in/gargesh-patil-8a25a6160" target="_blank" rel="noopener noreferrer" title="LinkedIn" class="text-gray-500 hover:text-white transition-colors duration-300">
                         <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 448 512"><path d="M100.28 448H7.4V148.9h92.88zM53.79 108.1C24.09 108.1 0 83.5 0 53.8a53.79 53.79 0 0 1 53.79-54.3c29.7 0 53.79 24.2 53.79 54.3a53.79 53.79 0 0 1 -53.79 54.3zM447.9 448h-92.68V302.4c0-34.7-.7-79.2-48.29-79.2-48.29 0-55.69 37.7-55.69 76.7V448h-92.78V148.9h89.08v40.8h1.3c12.4-23.5 42.69-48.3 87.88-48.3 94 0 111.28 61.9 111.28 142.3V448z"/></svg>
                     </a>
                     <a href="https://www.instagram.com/gargesh.patil" target="_blank" rel="noopener noreferrer" title="Instagram" class="text-gray-500 hover:text-white transition-colors duration-300">
                        <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 448 512"><path d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"/></svg>
                     </a>
                     <a href="https://wa.me/917666674551" target="_blank" rel="noopener noreferrer" title="WhatsApp" class="text-gray-500 hover:text-white transition-colors duration-300">
                        <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 512 512"><path d="M415.6,91.2c-47.4-47.4-110.6-73.4-177.4-73.4C108.4,17.8,18,108.2,18,238.2c0,42.4,11.8,83.2,34.8,119.2l-37,135.2l138.4-36.4c34.8,20.8,73.6,31.8,113.6,31.8h0.2c129.8,0,230.2-108.4,230.2-238.4C489,201.8,463,138.6,415.6,91.2z M251.8,443.8h-0.2c-35.6,0-70-9.8-99.4-28.2l-7.2-4.2l-73.8,19.4l19.8-71.8l-4.6-7.4c-20.4-32.8-31.2-70.8-31.2-110.2c0-108.4,89.4-197.8,197.8-197.8c54.2,0,104.4,21.2,141.2,57.8c36.8,36.8,57.8,87,57.8,141.2C449.6,354.4,360.2,443.8,251.8,443.8z M362.4,306.4c-5.4-2.8-32-15.8-37-17.8c-5-2-8.6-2.8-12.4,2.8c-3.8,5.6-14.2,17.8-17.4,21.4c-3.2,3.6-6.4,4-11.8,1.4c-5.4-2.8-22.8-8.4-43.4-26.8c-16-14.2-26.8-31.8-30-37.2c-3.2-5.4-0.4-8.4,2.4-11.2c2.4-2.4,5.4-6.4,8.2-9.6c2.8-3.2,3.6-5.4,5.4-9.2c1.8-3.8,1-7.2-0.4-9.8c-1.4-2.8-12.4-29.8-17-40.8c-4.6-11-9.2-9.4-12.4-9.6c-3.2-0.2-6.8-0.2-10.4-0.2c-3.6,0-9.6,1.4-14.6,6.8c-5,5.4-19.2,18.8-19.2,45.8c0,27,19.6,53.2,22.4,56.8c2.8,3.6,38.6,59.2,94,83c13.8,6,26.4,9.6,35.4,12.2c14.2,4.2,27.4,3.6,37.6,2.2c11-1.6,32-13.2,36.4-26.2c4.4-13,4.4-24,3.2-26.2C372,311.8,367.8,309.2,362.4,306.4z"/></svg>
                     </a>
                </div>
            </div>
        </div>

        <!-- Scene 9: Contact Form -->
        <div id="form-scene" class="scene hidden">
            <form id="contact-form" action="https://script.google.com/macros/s/AKfycbx6K0Hn3MSz946BaZaU6xA6C-BxdVuBlZrYlSJPJX7qlQPWE54QgNJi9THpOOJo4QeKfg/exec" method="POST" class="space-y-6">
                <div>
                    <label for="name" class="block text-lg font-medium text-white mb-2">Name</label>
                    <input type="text" id="name" name="name" required class="w-full p-3 bg-gray-900 border border-gray-700 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-white transition-all duration-300">
                </div>
                <div>
                    <label for="email" class="block text-lg font-medium text-white mb-2">Email</label>
                    <input type="email" id="email" name="email" required class="w-full p-3 bg-gray-900 border border-gray-700 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-white transition-all duration-300">
                </div>
                <div>
                    <label for="message" class="block text-lg font-medium text-white mb-2">Message</label>
                    <textarea id="message" name="message" rows="4" required class="w-full p-3 bg-gray-900 border border-gray-700 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-white transition-all duration-300"></textarea>
                    
                    <!-- Gemini Feature Button -->
                    <button type="button" id="gemini-btn" class="gemini-btn hidden mt-3 text-white font-medium py-2 px-4 text-sm rounded-lg transition-all duration-300 flex items-center justify-center space-x-2">
                        <span>✨ Help me write this</span>
                        <span id="gemini-spinner" class="spinner hidden"></span>
                    </button>
                </div>
                <div>
                    <button type="submit" class="mt-4 border-2 border-white bg-white text-black font-medium py-3 px-8 text-lg hover:bg-black hover:text-white transition-all duration-300">
                        Connect
                    </button>
                </div>
            </form>
        </div>

        <!-- Scene 10: Thank You Message -->
        <div id="thank-you-scene" class="scene hidden">
             <h2 class="font-serif text-4xl md:text-5xl font-normal mb-4 text-center md:text-left">Thank You!</h2>
             <p class="font-serif text-xl md:text-2xl font-normal leading-relaxed text-center md:text-left">I've received your message and will get back to you shortly.</p>
             <div class="mt-8 flex items-center justify-center md:justify-start space-x-6">
                 <a href="https://www.linkedin.com/in/gargesh-patil-8a25a6160" target="_blank" rel="noopener noreferrer" title="LinkedIn" class="text-gray-500 hover:text-white transition-colors duration-300">
                     <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 448 512"><path d="M100.28 448H7.4V148.9h92.88zM53.79 108.1C24.09 108.1 0 83.5 0 53.8a53.79 53.79 0 0 1 53.79-54.3c29.7 0 53.79 24.2 53.79 54.3a53.79 53.79 0 0 1 -53.79 54.3zM447.9 448h-92.68V302.4c0-34.7-.7-79.2-48.29-79.2-48.29 0-55.69 37.7-55.69 76.7V448h-92.78V148.9h89.08v40.8h1.3c12.4-23.5 42.69-48.3 87.88-48.3 94 0 111.28 61.9 111.28 142.3V448z"/></svg>
                 </a>
                 <a href="https://www.instagram.com/gargesh.patil" target="_blank" rel="noopener noreferrer" title="Instagram" class="text-gray-500 hover:text-white transition-colors duration-300">
                    <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 448 512"><path d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"/></svg>
                 </a>
                 <a href="https://wa.me/917666674551" target="_blank" rel="noopener noreferrer" title="WhatsApp" class="text-gray-500 hover:text-white transition-colors duration-300">
                    <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 512 512"><path d="M415.6,91.2c-47.4-47.4-110.6-73.4-177.4-73.4C108.4,17.8,18,108.2,18,238.2c0,42.4,11.8,83.2,34.8,119.2l-37,135.2l138.4-36.4c34.8,20.8,73.6,31.8,113.6,31.8h0.2c129.8,0,230.2-108.4,230.2-238.4C489,201.8,463,138.6,415.6,91.2z M251.8,443.8h-0.2c-35.6,0-70-9.8-99.4-28.2l-7.2-4.2l-73.8,19.4l19.8-71.8l-4.6-7.4c-20.4-32.8-31.2-70.8-31.2-110.2c0-108.4,89.4-197.8,197.8-197.8c54.2,0,104.4,21.2,141.2,57.8c36.8,36.8,57.8,87,57.8,141.2C449.6,354.4,360.2,443.8,251.8,443.8z M362.4,306.4c-5.4-2.8-32-15.8-37-17.8c-5-2-8.6-2.8-12.4,2.8c-3.8,5.6-14.2,17.8-17.4,21.4c-3.2,3.6-6.4,4-11.8,1.4c-5.4-2.8-22.8-8.4-43.4-26.8c-16-14.2-26.8-31.8-30-37.2c-3.2-5.4-0.4-8.4,2.4-11.2c2.4-2.4,5.4-6.4,8.2-9.6c2.8-3.2,3.6-5.4,5.4-9.2c1.8-3.8,1-7.2-0.4-9.8c-1.4-2.8-12.4-29.8-17-40.8c-4.6-11-9.2-9.4-12.4-9.6c-3.2-0.2-6.8-0.2-10.4-0.2c-3.6,0-9.6,1.4-14.6,6.8c-5,5.4-19.2,18.8-19.2,45.8c0,27,19.6,53.2,22.4,56.8c2.8,3.6,38.6,59.2,94,83c13.8,6,26.4,9.6,35.4,12.2c14.2,4.2,27.4,3.6,37.6,2.2c11-1.6,32-13.2,36.4-26.2c4.4-13,4.4-24,3.2-26.2C372,311.8,367.8,309.2,362.4,306.4z"/></svg>
                 </a>
            </div>
        </div>

    </div>

    <script>
        // --- State Management ---
        const scenes = {
            intro: document.getElementById('intro-scene'),
            name: document.getElementById('name-scene'),
            thirdYear: document.getElementById('third-year-scene'),
            incubation: document.getElementById('incubation-scene'),
            impact: document.getElementById('impact-scene'),
            beyondAcademics: document.getElementById('beyond-academics-scene'),
            commitment: document.getElementById('commitment-scene'),
            seeking: document.getElementById('seeking-scene'),
            form: document.getElementById('form-scene'),
            thankYou: document.getElementById('thank-you-scene')
        };
        
        const sceneOrder = ['intro', 'name', 'thirdYear', 'incubation', 'impact', 'beyondAcademics', 'commitment', 'seeking'];
        let currentSceneIndex = 0;
        let activeSceneKey = 'intro';
        let isTransitioning = false;
        let wheelTimeout;

        const getInTouchBtn = document.getElementById('get-in-touch-btn');
        const contactForm = document.getElementById('contact-form');
        const geminiBtn = document.getElementById('gemini-btn');
        const geminiSpinner = document.getElementById('gemini-spinner');
        const messageTextarea = document.getElementById('message');
        
        // --- Core Functions ---
        function transitionTo(newSceneKey, direction = 1) { // Default to forward (down scroll)
            if (isTransitioning || activeSceneKey === newSceneKey) return;
            isTransitioning = true;

            const currentScene = scenes[activeSceneKey];
            const nextScene = scenes[newSceneKey];
            
            const isForward = direction > 0;
            const outAnimation = isForward ? 'animate-fadeOutUp' : 'animate-fadeOutDown';
            const inAnimation = isForward ? 'animate-fadeInUp' : 'animate-fadeInDown';

            const onOutAnimationEnd = () => {
                currentScene.classList.add('hidden');
                currentScene.classList.remove(outAnimation);
                currentScene.removeEventListener('animationend', onOutAnimationEnd);
                
                nextScene.classList.remove('hidden');
                nextScene.classList.add(inAnimation);
                
                const onInAnimationEnd = () => {
                    activeSceneKey = newSceneKey;
                    isTransitioning = false;
                    nextScene.removeEventListener('animationend', onInAnimationEnd);
                };
                nextScene.addEventListener('animationend', onInAnimationEnd);
            };
            
            currentScene.classList.remove('animate-fadeInUp', 'animate-fadeInDown');
            currentScene.classList.add(outAnimation);
            currentScene.addEventListener('animationend', onOutAnimationEnd);
        }

        function handleInteraction(e) {
            if (isTransitioning) return;

            if (activeSceneKey === 'thankYou') {
                currentSceneIndex = 0;
                transitionTo('intro', 1);
                return;
            }

            if (activeSceneKey === 'form') return;

            let direction = 0;
            if (e.type === 'wheel') {
                direction = e.deltaY > 0 ? 1 : -1;
            } else {
                direction = 1;
            }

            const newIndex = currentSceneIndex + direction;

            if (newIndex >= 0 && newIndex < sceneOrder.length) {
                currentSceneIndex = newIndex;
                transitionTo(sceneOrder[currentSceneIndex], direction);
            }
        }

        // --- Event Listeners Setup ---
        window.addEventListener('load', () => {
            scenes.intro.classList.add('animate-fadeInUp');
            scenes.intro.addEventListener('animationend', () => {
                isTransitioning = false;
            }, { once: true });
            isTransitioning = true;
        });

        const wheelHandler = (e) => {
            e.preventDefault();
            clearTimeout(wheelTimeout);
            wheelTimeout = setTimeout(() => handleInteraction(e), 50);
        };

        window.addEventListener('click', handleInteraction);
        window.addEventListener('touchstart', handleInteraction);
        window.addEventListener('wheel', wheelHandler, { passive: false });

        getInTouchBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            if (navigator.vibrate) navigator.vibrate(50);
            transitionTo('form', 1);
        });

        contactForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const form = e.target;
            const formData = new FormData(form);
            const submitButton = form.querySelector('button[type="submit"]');
            
            submitButton.textContent = 'Sending...';
            submitButton.disabled = true;

            fetch(form.action, {
                method: 'POST',
                body: formData,
                mode: 'no-cors'
            })
            .then(() => {
                transitionTo('thankYou', 1);
                form.reset();
            }).catch(error => {
                console.error('Fetch Error:', error);
                alert('Oops! There was a network problem submitting your form.');
            }).finally(() => {
                submitButton.textContent = 'Connect';
                submitButton.disabled = false;
            });
        });
        
        // --- Gemini Feature Logic ---
        messageTextarea.addEventListener('input', () => {
            if(messageTextarea.value.trim() !== '') {
                geminiBtn.classList.remove('hidden');
            } else {
                geminiBtn.classList.add('hidden');
            }
        });
        
        geminiBtn.addEventListener('click', async () => {
            const name = document.getElementById('name').value;
            const email = document.getElementById('email').value;
            const originalMessage = messageTextarea.value;
            
            if(!originalMessage) {
                alert('Please type a message first.');
                return;
            }
            
            geminiBtn.disabled = true;
            geminiSpinner.classList.remove('hidden');

            const apiKey = ""; // API key is handled by the environment
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;
            
            const prompt = `You are a helpful assistant. A person named "${name}" (email: "${email}") is writing a professional message to Gargesh Patil for his portfolio. Their initial thought is: "${originalMessage}". Help them rewrite this into a slightly more polished and professional message, while keeping the original intent and tone. Keep the response concise and under 60 words. Do not add a greeting or closing, just provide the body of the message.`;
            
            const payload = {
                contents: [{ parts: [{ text: prompt }] }],
            };
            
            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                
                if (!response.ok) {
                    throw new Error(`API request failed with status ${response.status}`);
                }
                
                const result = await response.json();
                const candidate = result.candidates?.[0];
                
                if (candidate && candidate.content?.parts?.[0]?.text) {
                    messageTextarea.value = candidate.content.parts[0].text.trim();
                } else {
                    throw new Error('Unexpected response format from API.');
                }
                
            } catch (error) {
                console.error('Gemini API Error:', error);
                alert('Sorry, I couldn\'t suggest a reply right now. Please try again.');
            } finally {
                geminiBtn.disabled = false;
                geminiSpinner.classList.add('hidden');
            }
        });

    </script>

</body>
</html>
